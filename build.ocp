begin library "scilintCommon"
  files =  [
  (* - common *)
       "src/common/scilabLocations.ml"
       "src/common/scilintWarning.ml"
       "src/common/scilintOptions.ml"
       "src/common/scilintManual.ml"
  ]
end

begin library "scilabFive"
  files = [
  (* - AST and utils *)
	"src/scilab_five_ast/scilabFiveAst.ml"
	"src/scilab_five_ast/scilabFiveAstUtils.ml"
	"src/scilab_five_ast/scilabFiveAstSexpPrinter.ml"
  	"src/scilab_five_ast/scilabFiveAstPrettyPrinter.ml"
  (* - parser *)
	"src/scilab_five_parser/scilabFiveParserAst.ml"
	"src/scilab_five_parser/scilabFiveParser.ml"
	"src/scilab_five_parser/scilabFiveParserAstSerializer.ml"
  ]
  requires = [ "pprint" "scilintCommon" ]
end

begin library "scilabSix"
  files = [
  (* - AST and utils *)
	"src/scilab_six_ast/scilabSymbol.ml"
	"src/scilab_six_ast/scilabAst.ml"
	"src/scilab_six_ast/scilabAstPrinter.ml"
	"src/scilab_six_ast/scilabPrettyPrinter.ml"
  (* - parser *)
	"src/scilab_six_parser/scilabPreParser.ml"
        "src/scilab_six_parser/scilabParserUtils.ml"
	"src/scilab_six_parser/scilabParser.mly"
	"src/scilab_six_parser/scilabLexer.mll"
  ]
  requires = [ "uutf" "scilintCommon" ]
end

begin program "scintax"
  files = [
	"src/scintax/scintaxMain.ml"
  ]
  requires = [ "scilabFive" "scilintCommon" ]
end

begin program "scilint"
  files = [
	"src/scilint/config/scilintTree.ml";
	"src/scilint/config/scilintParser.mly";
	"src/scilint/config/scilintLexer.mll";
        "src/scilint/config/scilintConfig.ml";
	"src/scilint/scilabUtils.ml"
	"src/scilint/scilintFirehosegen.ml"
        "src/scilint/scilintProject.ml";
	"src/scilint/scilabFunctionAnalyze.ml"
	"src/scilint/scilabDeffRefactoring.ml"
	"src/scilint/scilabAstStats.ml"
	"src/scilint/scilintMain.ml"
  ]

  requires = [
    "scilintCommon" "scilabFive" "scilabSix" "unix"
  ]
end

begin program "scilintDocgen"
  requires = [ "scilintCommon" ]
  files = [ "src/scilint/scilintDocgen.ml" ]
end
